---
external help file: Microsoft.WindowsAzure.Commands.ServiceManagement.dll-Help.xml
ms.assetid: FDA81DCB-04A4-44E5-89CD-3C36F9BB6FA9
online version: ''
schema: 2.0.0
ms.openlocfilehash: 47ae6d45fd2043d394fa7884863a3235eaa0f8d5
ms.sourcegitcommit: 56ed085a868afa8263f8eb0f755b5822f5c29532
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/18/2020
ms.locfileid: "93945792"
---
# Set-AzureVMMicrosoftAntimalwareExtension

## Sinopse
Configura a extensão antimalware da Microsoft para uma máquina virtual.

## SYNTAX

### EnableMicrosoftAntimalwareExtensionJsonConfigFilePath (padrão)
```
Set-AzureVMMicrosoftAntimalwareExtension [-AntimalwareConfigFile] <String> [[-Version] <String>]
 [[-Monitoring] <String>] [[-StorageContext] <AzureStorageContext>] -VM <IPersistentVM>
 [-Profile <AzureSMProfile>] [-InformationAction <ActionPreference>] [-InformationVariable <String>]
 [<CommonParameters>]
```

### EnableMicrosoftAntimalwareExtensionJsonConfig
```
Set-AzureVMMicrosoftAntimalwareExtension [-AntimalwareConfiguration] <String> [[-Version] <String>]
 [[-Monitoring] <String>] [[-StorageContext] <AzureStorageContext>] -VM <IPersistentVM>
 [-Profile <AzureSMProfile>] [-InformationAction <ActionPreference>] [-InformationVariable <String>]
 [<CommonParameters>]
```

### DisableMicrosoftAntimalwareExtension
```
Set-AzureVMMicrosoftAntimalwareExtension [[-Version] <String>] [-Disable] -VM <IPersistentVM>
 [-Profile <AzureSMProfile>] [-InformationAction <ActionPreference>] [-InformationVariable <String>]
 [<CommonParameters>]
```

### UninstallMicrosoftAntimalwareExtension
```
Set-AzureVMMicrosoftAntimalwareExtension [-Uninstall] -VM <IPersistentVM> [-Profile <AzureSMProfile>]
 [-InformationAction <ActionPreference>] [-InformationVariable <String>] [<CommonParameters>]
```

### ConfigureMicrosoftAntimalwareMonitoring
```
Set-AzureVMMicrosoftAntimalwareExtension [-Monitoring] <String> [[-StorageContext] <AzureStorageContext>]
 [-NoConfig] -VM <IPersistentVM> [-Profile <AzureSMProfile>] [-InformationAction <ActionPreference>]
 [-InformationVariable <String>] [<CommonParameters>]
```

## DESCRITIVO
O cmdlet **set-AzureVMMicrosoftAntimalwareExtension** configura a extensão antimalware da Microsoft para uma máquina virtual.
Você pode habilitar, desabilitar ou desinstalar a extensão.

## EXEMPLOS

### Exemplo 1: habilitar a extensão usando um arquivo de configuração
```
PS C:\> Get-AzureVM -ServiceName "ContosoService03" -Name "ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -AntimalwareConfigFile 'C:\configuration\contosoVM.json' | Update-AzureVM
```

Esse comando habilita a extensão antimalware da Microsoft usando um arquivo de configuração.
O comando usa o cmdlet **Get-AzureVM** para obter o objeto da máquina virtual especificada e, em seguida, passa o objeto para o cmdlet atual usando o operador pipeline.

### Exemplo 2: habilitar a extensão e habilitar o monitoramento
```
PS C:\> $StorageContext = New-AzureStorageContext -StorageAccountName "contosostoragemain" -StorageAccountKey (Get-AzureStorageKey -StorageAccountName "Contosostoragemain").PrimaryP
S C:\> Get-AzureVM -ServiceName "ContosoService03" -Name"ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -AntimalwareConfigFile 'C:\configuration\contosoVM.json" -Monitoring ON -StorageContext $StorageContext | Update-AzureVM
```

O primeiro comando cria um objeto AzureStorageContext usando o cmdlet **New-AzureStorageContext** e, em seguida, armazena-o na variável $StorageContext.

### Exemplo 3: habilitar a extensão especificando um objeto de configuração
```
PS C:\> $Config_String = [IO.File]::ReadAllText('C:\configuration\contosoVM.json')
PS C:\> Get-AzureVM -ServiceName "ContosoService03" -Name "ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -AntimalwareConfiguration $Config_String | Update-AzureVM
```

O primeiro comando cria um objeto String lendo uma configuração JSON para a extensão antimalware da Microsoft e armazenando-o na variável $config _string.

### Exemplo 4: desabilitar a extensão
```
PS C:\> Get-AzureVM -ServiceName "ContosoService03" -Name "ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -Disable | Update-AzureVM
```

Esse comando desabilita a extensão sem removê-la.
O comando usa Get-AzureVM para obter o objeto da máquina virtual especificada e, em seguida, passa o objeto para o cmdlet atual.

### Exemplo 5: remover a extensão
```
PS C:\> Get-AzureVM -ServiceName "ContosoService03" -Name"ContosoVM22" | Set-AzureVMMicrosoftAntimalwareExtension -Uninstall | Update-AzureVM
```

Esse comando Remove a extensão antimalware da Microsoft da máquina virtual.
O comando usa Get-AzureVM para obter o objeto da máquina virtual especificada e, em seguida, passa o objeto para o cmdlet atual.

## OS

### -AntimalwareConfigFile
Especifica o caminho absoluto do arquivo de configuração antimalware da Microsoft.
Não especifique esse parâmetro se você especificar o parâmetro AntimalwareConfiguration.
O arquivo de configuração deve incluir, no mínimo, o seguinte conteúdo para habilitar a extensão antimalware da Microsoft: 

`{ "AntimalwareEnabled": true }`

```yaml
Type: String
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfigFilePath
Aliases: 

Required: True
Position: 1
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -AntimalwareConfiguration
Especifica um objeto de cadeia de caracteres que contém a configuração antimalware da Microsoft.
Este objeto não deve ser $Null ou vazio.
Não especifique esse parâmetro se você especificar o parâmetro AntimalwareConfigFile.
O objeto de configuração deve incluir, no mínimo, o seguinte conteúdo para habilitar a extensão antimalware da Microsoft: * * * * {"AntimalwareEnabled": true}

Exemplo de configuração JSON do Microsoft AntiMalware: 

{"AntimalwareEnabled": verdadeiro, "RealtimeProtectionEnabled": verdadeiro, "ScheduledScanSettings": {"isEnabledtype": verdadeiro, "dia": 1, "hora": 120, "ScanType": "completo"},

"Exclusões": {"extensões": ". EXT1;. ext2 "," Paths ":" c:\excluded-path-1; c:\excluded-Path-2 "," processes ":" excludedproc1.exe; excludedproc2.exe "}

}

Observações: AntimalwareEnabled é um parâmetro obrigatório.
Valores: true = Enable.
false = erro como falso não é um valor com suporte

RealtimeProtectionEnabled: true/false. true = habilitar.
false = desabilitar.
O padrão é verdadeiro

ScheduledScanSettings:  
isEnabled = verdadeiro/falso dia = 0-8 (0-diariamente, 1-domingo, 2-segunda-feira,...., 7-sábado, 8-desabilitado) time = 0-1440 (medido em minutos após a meia-noite-60- \> 1am, 120- \> 2AM,...) ScanType = "rápido" ou "completo" (o padrão é rápido) Observação: se IsEnabled = true for a única configuração fornecida, os seguintes padrões serão definidos: Day = 7 (sábado), hora = 120 (2 am), ScanType = "rápidas" exclusões: várias exclusões na mesma lista são especificadas usando-se delimitadores de ponto-e-vírgula.

Se não forem especificadas exclusões, as exclusões existentes, se houver, serão sobrescritas em branco no sistema.

```yaml
Type: String
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfig
Aliases: 

Required: True
Position: 1
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Disable
Indica que o cmdlet desabilita a extensão antimalware da Microsoft.
Para habilitar novamente a extensão na mesma máquina virtual, execute Set-AzureVMMicrosoftAntimalwareExtension sem o parâmetro Disable.

```yaml
Type: SwitchParameter
Parameter Sets: DisableMicrosoftAntimalwareExtension
Aliases: 

Required: False
Position: 2
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Informationaction
Especifica como esse cmdlet responde a um evento de informações.

Os valores aceitáveis para esse parâmetro são:

- Contínuo
- Ignorar
- Inquire
- SilentlyContinue
- Finaliza
- Suspensão

```yaml
Type: ActionPreference
Parameter Sets: (All)
Aliases: infa

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -InformationVariable
Especifica uma variável de informações.

```yaml
Type: String
Parameter Sets: (All)
Aliases: iv

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -Monitoramento
Especifica se devem ser coletados eventos antimalware da Microsoft.

Os valores aceitáveis para esse parâmetro são:

- No.
Coletar eventos antimalware da Microsoft para contexto de armazenamento. 
- Redonda.
Não colete eventos antimalware da Microsoft.

```yaml
Type: String
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfigFilePath, EnableMicrosoftAntimalwareExtensionJsonConfig
Aliases: 

Required: False
Position: 3
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

```yaml
Type: String
Parameter Sets: ConfigureMicrosoftAntimalwareMonitoring
Aliases: 

Required: True
Position: 3
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Noconfig
Indica que esse cmdlet especifica a opção noconfig.

```yaml
Type: SwitchParameter
Parameter Sets: ConfigureMicrosoftAntimalwareMonitoring
Aliases: 

Required: True
Position: 3
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Perfil
Especifica o perfil do Azure do qual este cmdlet lê.
Se você não especificar um perfil, esse cmdlet lerá do perfil padrão local.

```yaml
Type: AzureSMProfile
Parameter Sets: (All)
Aliases: 

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -StorageContext
Especifica um contexto de armazenamento do Azure para monitoramento de antimalware da Microsoft.

```yaml
Type: AzureStorageContext
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfigFilePath, EnableMicrosoftAntimalwareExtensionJsonConfig, ConfigureMicrosoftAntimalwareMonitoring
Aliases: 

Required: False
Position: 4
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Desinstalar
Indica que esse cmdlet desinstala a extensão antimalware da Microsoft da máquina virtual.
Se o monitoramento tiver sido ativado, o cmdlet também removerá a coleção de eventos antimalware da Microsoft.

```yaml
Type: SwitchParameter
Parameter Sets: UninstallMicrosoftAntimalwareExtension
Aliases: 

Required: True
Position: 1
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Versão
Especifica a versão de extensão como uma cadeia de caracteres. Observação: a versão com suporte é 1,5. As versões mais antigas não são compatíveis com a Microsoft.

```yaml
Type: String
Parameter Sets: EnableMicrosoftAntimalwareExtensionJsonConfigFilePath, EnableMicrosoftAntimalwareExtensionJsonConfig, DisableMicrosoftAntimalwareExtension
Aliases: 

Required: False
Position: 2
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -VM
Especifica a máquina virtual como um objeto IPersistentVM.

```yaml
Type: IPersistentVM
Parameter Sets: (All)
Aliases: InputObject

Required: True
Position: Named
Default value: None
Accept pipeline input: True (ByPropertyName, ByValue)
Accept wildcard characters: False
```

### CommonParameters
Esse cmdlet dá suporte a parâmetros comuns:-debug,-ErrorAction,-ErrorVariable,-Informationaction,-InformationVariable,-OutVariable,-OutBuffer,-PipelineVariable,-Verbose-WarningAction e-WarningVariable. Para obter mais informações, consulte about_CommonParameters ( https://go.microsoft.com/fwlink/?LinkID=113216) .

## SENSORES

## EXIBE

## INFORMA

## LINKS RELACIONADOS

[Get-AzureVMMicrosoftAntimalwareExtension](./Get-AzureVMMicrosoftAntimalwareExtension.md)

[Remove-AzureVMMicrosoftAntimalwareExtension](./Remove-AzureVMMicrosoftAntimalwareExtension.md)

[Get-AzureVM](./Get-AzureVM.md)


